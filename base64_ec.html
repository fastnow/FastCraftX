<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Eaglercraft 文件解码器</title><style>*{box-sizing:border-box;font-family:system-ui,sans-serif}body{margin:0;padding:20px;background:#f5f5f5;color:#333;line-height:1.6}.container{max-width:1200px;margin:auto;background:#fff;border:1px solid #ddd;padding:20px}header{text-align:center;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid #ccc}h1{color:#000;margin:0;font-size:1.8rem}h2{color:#444;border-left:3px solid #666;padding-left:8px;margin-top:20px}h3{color:#222}.input-section{display:flex;flex-wrap:wrap;gap:20px;margin-bottom:20px}.input-box{flex:1;min-width:300px;background:#f9f9f9;border:1px solid #ccc;padding:15px}.control-buttons{display:flex;flex-wrap:wrap;gap:10px;margin:20px 0;justify-content:center}button{padding:10px 18px;border:1px solid #999;background:#e9e9e9;cursor:pointer;font-size:15px}button:hover{background:#ddd}button:disabled{background:#eee;color:#888;cursor:default}textarea{width:100%;height:150px;padding:10px;border:1px solid #bbb;background:#fefefe;font-family:monospace;font-size:13px;resize:vertical}.file-input-label{display:inline-block;padding:10px 18px;background:#eee;border:1px solid #999;cursor:pointer}.file-info{margin-top:10px;padding:8px;background:#f0f0f0;font-size:13px}.result-section{margin-top:20px;padding:15px;border:1px solid #ccc}.result-content{background:#f8f8f8;padding:12px;font-family:monospace;font-size:13px;overflow:auto;white-space:pre-wrap;max-height:400px}.info-box{padding:12px;border-left:3px solid #666;background:#f0f0f0;margin:15px 0}.file-details{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:10px;margin-top:15px}.detail-card{padding:12px;border:1px solid #ccc;background:#f9f9f9}footer{text-align:center;margin-top:30px;padding-top:15px;border-top:1px solid #ccc;color:#666;font-size:13px}@media (max-width:768px){.input-section{flex-direction:column}.input-box{min-width:100%}.control-buttons{flex-direction:column;align-items:center}button{width:100%;max-width:300px}}</style></head><body><div class="container"><header><h1>Eaglercraft 文件解码器</h1><p>用于解码 Eaglercraft 客户端的签名和 bundle 文件</p></header><div class="info-box"><h3>说明</h3><p>该工具是在开发 FastCraftX 时，为逆向分析 Eaglercraft 签名验证机制与启动脚本而编写的解码器，可解析客户端签名文件（signature）与资源包（bundle），支持 base64 解码、文件类型识别与 GZIP 解压。</p></div><div class="input-section"><div class="input-box"><h2>签名数据</h2><p>粘贴 base64 格式的签名数据：</p><textarea id="signatureInput" placeholder="例如：data:application/octet-stream;base64,RUFHU0lHAAE..."></textarea><div class="file-info"><span id="signatureInfo">等待输入</span></div></div><div class="input-box"><h2>Bundle 文件</h2><p>上传 bundle 文件：</p><label class="file-input-label">选择文件<input type="file" id="bundleFile" accept=".txt,.bin,.gz,.data" style="display:none"></label><div class="file-info"><span id="bundleInfo">等待选择</span></div><div id="bundleDetails"></div></div></div><div class="control-buttons"><button id="decodeSignatureBtn" onclick="decodeSignature()">解码签名</button><button id="decodeBundleBtn" onclick="decodeBundle()" disabled>解码 Bundle</button><button id="decodeBothBtn" onclick="decodeBoth()" disabled>同时解码</button><button onclick="clearAll()">清除所有</button><button onclick="loadExampleData()">加载示例</button></div><div class="result-section"><h2>解码结果</h2><div class="result-content" id="resultOutput">等待解码…</div><div class="file-details" id="fileDetails"></div><div id="downloadButtons" style="display:none;gap:10px;margin-top:15px"><button id="downloadSignatureBtn">下载签名文件</button><button id="downloadBundleBtn">下载 Bundle 文件</button><button id="downloadDecompressedBtn" style="display:none">下载解压后文件</button></div></div><footer><p>Eaglercraft 文件解码器 - FastCraftX 开发工具</p></footer></div><script>let signatureData="",bundleData="",bundleFileName="",bundleFileSize=0,decodedSignature=null,decodedBundle=null,decompressedBundle=null;document.getElementById('signatureInput').addEventListener('input',function(){signatureData=this.value.trim();document.getElementById('signatureInfo').textContent=signatureData?`已输入 ${signatureData.length} 字符`:"等待输入";updateButtonStates();});document.getElementById('bundleFile').addEventListener('change',function(e){const file=e.target.files[0];if(file){bundleFileName=file.name;bundleFileSize=file.size;document.getElementById('bundleInfo').textContent=`${file.name} (${formatSize(file.size)})`;document.getElementById('bundleDetails').innerHTML=`<p><strong>大小：</strong>${formatSize(file.size)}</p><p><strong>修改：</strong>${new Date(file.lastModified).toLocaleString()}</p>`;const reader=new FileReader();reader.onload=function(ev){bundleData=ev.target.result;updateButtonStates();};reader.readAsText(file);}else{bundleData="";document.getElementById('bundleInfo').textContent="等待选择";document.getElementById('bundleDetails').innerHTML="";updateButtonStates();}});function updateButtonStates(){const s=!!signatureData,b=!!bundleData;document.getElementById('decodeSignatureBtn').disabled=!s;document.getElementById('decodeBundleBtn').disabled=!b;document.getElementById('decodeBothBtn').disabled=!(s&&b);}function formatSize(b){if(b===0)return"0 B";const u=["B","KB","MB","GB"],i=Math.floor(Math.log(b)/Math.log(1024));return parseFloat((b/Math.pow(1024,i)).toFixed(2))+" "+u[i];}function extractBase64(d){if(d.startsWith('data:')){const idx=d.indexOf('base64,');if(idx!==-1)return d.substring(idx+7);}return d;}async function decodeBase64ToArrayBuffer(b){const pure=extractBase64(b),bin=atob(pure),arr=new Uint8Array(bin.length);for(let i=0;i<bin.length;i++)arr[i]=bin.charCodeAt(i);return arr.buffer;}function decodeBase64ToText(b){try{return atob(extractBase64(b));}catch{return null;}}async function decodeBase64ToHex(b){const buf=await decodeBase64ToArrayBuffer(b),arr=new Uint8Array(buf);let h="";for(let i=0;i<Math.min(128,arr.length);i++){h+=arr[i].toString(16).padStart(2,'0')+" ";if((i+1)%16===0)h+="\n";}return h;}function analyzeFileType(buf){const arr=new Uint8Array(buf);let type="未知",isGzip=false;if(arr.length>=2){if(arr[0]===0x1F&&arr[1]===0x8B){type="GZIP";isGzip=true;}else if(arr[0]===0x45&&arr[1]===0x41&&arr[2]===0x47&&arr[3]===0x53)type="Eaglercraft 签名";}let magic="";for(let i=0;i<Math.min(8,arr.length);i++)magic+=arr[i].toString(16).padStart(2,'0')+" ";return{type,size:buf.byteLength,magic:magic.trim(),isGzip};}async function decompressGzip(buf){if(typeof DecompressionStream==='undefined')throw new Error("浏览器不支持解压");const ds=new DecompressionStream('gzip'),stream=new Blob([buf]).stream().pipeThrough(ds);return await new Response(stream).arrayBuffer();}async function decodeSignature(){if(!signatureData)return;try{const buf=await decodeBase64ToArrayBuffer(signatureData);decodedSignature=buf;const info=analyzeFileType(buf),text=decodeBase64ToText(signatureData),hex=await decodeBase64ToHex(signatureData);let out="=== 签名解码结果 ===\n\n";out+=`类型: ${info.type}\n大小: ${formatSize(info.size)}\n魔数: ${info.magic}\n\n`;out+="=== 文本预览（前200字符）===\n";out+=text?text.substring(0,200)+(text.length>200?"...":""):"无法解码为文本";out+="\n\n=== 十六进制预览（前128字节）===\n";out+=hex;if(info.size>128)out+="\n...（仅显示前128字节）";document.getElementById('resultOutput').textContent=out;document.getElementById('fileDetails').innerHTML=`<div class="detail-card"><h4>签名文件信息</h4><p><strong>类型:</strong> ${info.type}</p><p><strong>大小:</strong> ${formatSize(info.size)}</p><p><strong>魔数:</strong> ${info.magic}</p></div>`;document.getElementById('downloadSignatureBtn').onclick=()=>downloadDecodedFile(signatureData,'signature.bin');document.getElementById('downloadButtons').style.display='flex';}catch(e){alert("解码失败："+e.message);}}async function decodeBundle(){if(!bundleData)return;try{const buf=await decodeBase64ToArrayBuffer(bundleData);decodedBundle=buf;const info=analyzeFileType(buf);let out="=== Bundle 解码结果 ===\n\n";out+=`类型: ${info.type}\n大小: ${formatSize(info.size)}\n魔数: ${info.magic}\n\n`;if(info.isGzip){out+="检测到 GZIP 压缩，正在解压…\n\n";document.getElementById('resultOutput').textContent=out;try{const decompressed=await decompressGzip(buf);decompressedBundle=decompressed;const decInfo=analyzeFileType(decompressed);out+="=== 解压后 ===\n\n";out+=`大小: ${formatSize(decInfo.size)}\n类型: ${decInfo.type}\n魔数: ${decInfo.magic}\n\n`;const text=new TextDecoder().decode(new Uint8Array(decompressed,0,Math.min(500,decInfo.size)));out+="=== 文本预览（前500字符）===\n"+text;if(decInfo.size>500)out+="\n...（仅显示前500字符）";document.getElementById('downloadDecompressedBtn').style.display='block';document.getElementById('downloadDecompressedBtn').onclick=()=>downloadArrayBuffer(decompressed,'decompressed.js');}catch(de){out+="解压失败："+de.message+"\n";}}else{const hex=await decodeBase64ToHex(bundleData);out+="=== 十六进制预览（前128字节）===\n"+hex;if(info.size>128)out+="\n...（仅显示前128字节）";}document.getElementById('resultOutput').textContent=out;document.getElementById('fileDetails').innerHTML=`<div class="detail-card"><h4>Bundle 文件信息</h4><p><strong>类型:</strong> ${info.type}</p><p><strong>大小:</strong> ${formatSize(info.size)}</p><p><strong>压缩:</strong> ${info.isGzip?'是 (GZIP)':'否'}</p></div>`;document.getElementById('downloadBundleBtn').onclick=()=>downloadDecodedFile(bundleData,'bundle.bin');document.getElementById('downloadButtons').style.display='flex';}catch(e){alert("解码失败："+e.message);}}async function decodeBoth(){await decodeSignature();await decodeBundle();const out=document.getElementById('resultOutput').textContent+"\n\n=== 解码完成 ===\n\n"+`签名大小: ${decodedSignature?formatSize(decodedSignature.byteLength):'N/A'}\n`+`Bundle 大小: ${decodedBundle?formatSize(decodedBundle.byteLength):'N/A'}\n`+`解压后大小: ${decompressedBundle?formatSize(decompressedBundle.byteLength):'N/A'}`;document.getElementById('resultOutput').textContent=out;}function downloadDecodedFile(b64,name){try{const pure=extractBase64(b64),bin=atob(pure),arr=new Uint8Array(bin.length);for(let i=0;i<bin.length;i++)arr[i]=bin.charCodeAt(i);downloadArrayBuffer(arr.buffer,name);}catch(e){alert("下载失败："+e.message);}}function downloadArrayBuffer(buf,name){const blob=new Blob([buf]),url=URL.createObjectURL(blob),a=document.createElement('a');a.href=url;a.download=name;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}function clearAll(){document.getElementById('signatureInput').value='';signatureData='';document.getElementById('signatureInfo').textContent='等待输入';document.getElementById('bundleFile').value='';bundleData='';document.getElementById('bundleInfo').textContent='等待选择';document.getElementById('bundleDetails').innerHTML='';document.getElementById('resultOutput').textContent='等待解码…';document.getElementById('fileDetails').innerHTML='';document.getElementById('downloadButtons').style.display='none';document.getElementById('downloadDecompressedBtn').style.display='none';decodedSignature=decodedBundle=decompressedBundle=null;updateButtonStates();}function loadExampleData(){const sig="data:application/octet-stream;base64,RUFHU0lHAAE8KWGumw9XewsBzd0YHnyQAAA==";document.getElementById('signatureInput').value=sig;document.getElementById('signatureInput').dispatchEvent(new Event('input'));const bnd="data:application/octet-stream;base64,H4sIAAAAAAAA/ytJLS7JzE0tLk4tSUxJ5QIAQE5p+CsAAAA=",blob=new Blob([bnd],{type:'text/plain'}),file=new File([blob],"example_bundle.txt",{type:"text/plain",lastModified:Date.now()}),dt=new DataTransfer();dt.items.add(file);document.getElementById('bundleFile').files=dt.files;document.getElementById('bundleFile').dispatchEvent(new Event('change'));alert("示例数据已加载（部分数据为演示用途）");}updateButtonStates();</script></body></html>